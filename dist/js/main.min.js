!function(){const e=document.documentElement;if(e.classList.remove("no-js"),e.classList.add("js"),document.body.classList.contains("has-animations")){const e=window.sr=ScrollReveal();e.reveal(".hero-title, .hero-paragraph, .hero-cta",{duration:1e3,distance:"40px",easing:"cubic-bezier(0.5, -0.01, 0, 1.005)",origin:"bottom",interval:150}),e.reveal(".feature, .pricing-table",{duration:600,distance:"40px",easing:"cubic-bezier(0.5, -0.01, 0, 1.005)",interval:100,origin:"bottom",viewFactor:.5}),e.reveal(".feature-extended-image",{duration:600,scale:.9,easing:"cubic-bezier(0.5, -0.01, 0, 1.005)",viewFactor:.5})}}();

// Simple hero image cross-fade
const hero = document.querySelector('.hero-slider');

window.addEventListener('load', () => {
  if (window.sr) window.sr.sync();
});

if (hero) {
  // Put as many images as you want here:
  const slides = [
    'src/img/Pequabuck-Homepage.png',
  ];

  // Inject <img> tags (preloads as the DOM builds)
  slides.forEach((src, i) => {
    const img = document.createElement('img');
    img.src = src;
    img.alt = i === 0 ? 'Pequabuck homepage preview' : `Homepage preview ${i + 1}`;
    img.decoding = 'async';
    img.loading = 'eager'; // hero should load ASAP
    if (i === 0) img.classList.add('is-active');
    hero.appendChild(img);
  });

  const imgs = Array.from(hero.querySelectorAll('img'));
  let idx = 0;

  setInterval(() => {
    const prev = idx;
    idx = (idx + 1) % imgs.length;

    // If only 1 image, force a fade-out/fade-in so you still see movement
    if (imgs.length === 1) {
      imgs[0].classList.remove('is-active');
      setTimeout(() => imgs[0].classList.add('is-active'), 50);
      return;
    }

    imgs[prev].classList.remove('is-active');
    imgs[idx].classList.add('is-active');
  }, 2500);
}

(() => {
  const header = document.querySelector('.site-header');
  const btn = document.querySelector('.nav-toggle');
  const nav = document.querySelector('#site-nav');
  if (!header || !btn || !nav) return;

  const setOpen = (open) => {
    header.classList.toggle('is-nav-open', open);
    btn.setAttribute('aria-expanded', open ? 'true' : 'false');
  };

  btn.addEventListener('click', () => {
    const open = btn.getAttribute('aria-expanded') === 'true';
    setOpen(!open);
  });

  // Close when a link is clicked
  nav.addEventListener('click', (e) => {
    if (e.target.closest('a')) setOpen(false);
  });

  // Close if you tap outside
  document.addEventListener('click', (e) => {
    const clickedInside = header.contains(e.target);
    if (!clickedInside) setOpen(false);
  });

  // Close on Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') setOpen(false);
  });
})();
